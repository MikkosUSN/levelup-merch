<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/_layout :: layout">
<head>
  <title>Orders</title>
</head>
<body>
<div th:fragment="content" class="container mt-4">
  <h2>Your Orders</h2>

  <!-- Show message if no orders exist -->
  <div th:if="${#lists.isEmpty(orders)}" class="alert alert-info mt-3">
    No orders yet.
  </div>

  <!-- Show table only when orders exist -->
  <table th:if="${!#lists.isEmpty(orders)}" class="table table-striped mt-3">
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Date</th>
        <th>Total ($)</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="o : ${orders}">
        <!-- M7 update: make order ID clickable to show details -->
        <td><a th:href="@{/orders/{id}(id=${o.id})}" th:text="${o.id}"></a></td>
        <td th:text="${#temporals.format(o.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${#numbers.formatDecimal(o.total,1,2)}"></td>
      </tr>
    </tbody>
  </table>
</div>
</body>
</html>
