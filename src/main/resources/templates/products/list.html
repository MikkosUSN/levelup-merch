<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/_layout :: layout">
<head><title>Products</title></head>
<body>
<div th:fragment="content" class="container mt-4">

  <!-- Page header and button to add a product -->
  <div class="d-flex justify-content-between align-items-center">
    <h2>Products</h2>
    <a class="btn btn-success" th:href="@{/products/new}">New Product</a>
  </div>
  <hr/>

  <!-- Show table if products exist -->
  <table class="table table-striped" th:if="${products} and !${#lists.isEmpty(products)}">
    <thead>
      <tr><th>ID</th><th>Name</th><th>Price</th><th>Category</th></tr>
    </thead>
    <tbody>
      <!-- Loop through each product -->
      <tr th:each="p : ${products}">
        <td th:text="${p.id}">1</td>
        <td th:text="${p.name}">Name</td>
        <!-- M4 update: use ConversionService (@NumberFormat) so we always show 2 decimals -->
        <td th:text="${{p.price}}">0.00</td>
        <td th:text="${p.category}">Category</td>
      </tr>
    </tbody>
  </table>

  <!-- Message if no products -->
  <p th:if="${#lists.isEmpty(products)}">No products yet.</p>
</div>
</body>
</html>
